#端口信号检测
**Note**在编写子程序的过程中，我们常常要用到检测端口这个功能。新老平台的检测端口方式是不一样的，在本文中为大家进行一定的阐述。目的是希望大家能够掌握新平台的端口检测方法。

##老平台
我们先来看这样一段代码:

```
    G906 PLC[#IP_SPINEXACTSTOP] LEVEL1 P10000				
	IF(#SYNTIMEOUT<0) M801 MSG"{@2824}"; M901 PLC[91509] LEVEL0; M30;
```

先利用G906指令来等待PLC某个信号的变化，然后通过`#SYNTIMEOUT`变量判断上一条G906指令的执行情况，值如果小于零0则表示执行失败，在规定的时间内没有等到信号值。然后根据执行情况
做出一些动作。

##新平台
我们利用一个函数达到与老平台相应的效果。

```
    WaitPort(P = "Phoenix.G.Lambda.X01",L = 1,T = 2000)
    if Phoenix.G.Lambda.X01 then
        Error("信号检测失败！")
    end
```
首先我们对某一个端口的某个信号值做检测，并设置好溢出时间。执行完这一条之后，我们在下一条指令中去再次检测该端口的值是否满足需求。如果满足则继续，如果不满足则做出相应的处理。

**注**本人觉得这种方式在理论上存在误差，并且在语意上是错误的，只能作为一种临时的方案来看待，后面期待组件的升级修正。
